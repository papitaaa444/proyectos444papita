<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Mi Mundo Para Ti ğŸŒ¸</title>
    <style>
        :root { --rosa: #ff85a2; --rosa-fuerte: #ff4d6d; --magenta: #c9184a; --noche: #000022; }
        * { box-sizing: border-box; touch-action: none; -webkit-tap-highlight-color: transparent; }
        body { margin: 0; font-family: 'Georgia', serif; background: #fff0f5; overflow: hidden; height: 100vh; }
        
        .pantalla { display: none; padding: 15px; text-align: center; height: 100vh; overflow-y: auto; }
        .card { background: rgba(255, 255, 255, 0.95); border-radius: 25px; padding: 20px; border: 2px solid var(--rosa); max-width: 400px; margin: 10px auto 40px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); }
        
        .btn { background: var(--rosa); color: white; border: none; padding: 12px 20px; border-radius: 50px; font-weight: bold; cursor: pointer; margin: 5px; transition: 0.3s; }
        .btn:active { transform: scale(0.9); }
        .btn-magenta { background: var(--magenta); }
        
        canvas { background: white; border-radius: 20px; border: 2px solid #ffc2d1; width: 100%; max-width: 320px; display: block; margin: 0 auto; }
        .dark { background: var(--noche) !important; color: white !important; }
        
        .playlist { text-align: left; background: rgba(255,255,255,0.1); padding: 10px; border-radius: 15px; font-size: 14px; }
        .playlist li { margin: 5px 0; list-style: "ğŸµ "; }
        
        input { padding: 10px; border-radius: 10px; border: 1px solid #ccc; width: 80%; margin: 10px 0; text-align: center; }
    </style>
</head>
<body>

<section id="p1" class="pantalla" style="display:block;">
    <div class="card" style="margin-top:20vh;">
        <h1 style="color:var(--magenta)">Â¡Hola, Mi Persona Favorita! âœ¨</h1>
        <p>He preparado una aventura larga y especial. No te saltes nada, cada parte es para ti.</p>
        <button class="btn" onclick="mostrar('p2')">Empezar el Viaje ğŸŒ¸</button>
    </div>
</section>

<section id="p2" class="pantalla">
    <div class="card">
        <div id="sub-dibujo">
            <h2>Dibuja algo lindo ğŸ¨</h2>
            <canvas id="c1" width="320" height="350"></canvas>
            <button class="btn" onclick="sigSub('sub-relleno')">Siguiente â¡ï¸</button>
        </div>
        <div id="sub-relleno" style="display:none;">
            <h2>Rellena mi corazÃ³n â¤ï¸</h2>
            <canvas id="c2" width="320" height="350"></canvas>
            <button class="btn" onclick="sigSub('sub-corazones'); startCorazones();">Siguiente â¡ï¸</button>
        </div>
        <div id="sub-corazones" style="display:none;">
            <h2>Atrapa 10 rosas ğŸ’—</h2>
            <p id="pts">Puntos: 0/10</p>
            <canvas id="c3" width="320" height="350"></canvas>
        </div>
    </div>
</section>

<section id="p3" class="pantalla">
    <div class="card">
        <h2>El Laberinto del Destino ğŸ§­</h2>
        <p>Lleva el â¤ï¸ a la ğŸŒŸ sin tocar las paredes rosas.</p>
        <canvas id="cLab" width="320" height="350"></canvas>
        <button class="btn" style="font-size:10px; opacity:0.5" onclick="mostrar('p4')">Saltar si es muy difÃ­cil</button>
    </div>
</section>

<section id="p4" class="pantalla dark">
    <div class="card" style="background:rgba(255,255,255,0.1); border:none;">
        <h2 style="color:var(--rosa)">ğŸŒ¹ Historia del Principito</h2>
        <div id="prin1">
            <p>"Si vienes, por ejemplo, a las cuatro de la tarde, desde las tres yo empezarÃ­a a ser dichoso."</p>
            <button class="btn" onclick="sigSub('prin2')">Â¿Y despuÃ©s? â¤ï¸</button>
        </div>
        <div id="prin2" style="display:none;">
            <p>"Fue el tiempo que pasaste con tu rosa lo que la hizo tan importante."</p>
            <button class="btn" onclick="sigSub('prin3')">Â¿QuÃ© es lo esencial? âœ¨</button>
        </div>
        <div id="prin3" style="display:none;">
            <p>"Lo esencial es invisible a los ojos..."</p>
            <button class="btn-magenta btn" onclick="mostrar('p5')">Lo sÃ©, lo siento en el corazÃ³n â¤ï¸</button>
        </div>
    </div>
</section>

<section id="p5" class="pantalla dark">
    <div class="card" style="background:rgba(255,255,255,0.1); border:none;">
        <h2>Esquiva las nubes â˜ï¸</h2>
        <p id="enText">EnergÃ­a de Amor: 0%</p>
        <canvas id="cCielo" width="320" height="350"></canvas>
    </div>
</section>

<section id="p6" class="pantalla">
    <div class="card">
        <h2>Â¿QuiÃ©n canta esto? ğŸ•µï¸</h2>
        <div id="art1">
            <p style="font-size:40px;">â˜€ï¸ ğŸŒŠ ğŸ•¶ï¸ ğŸ°</p>
            <input type="text" id="i1" placeholder="Nombre...">
            <button class="btn" onclick="chkA(1, 'bad')">Siguiente â¡ï¸</button>
        </div>
        <div id="art2" style="display:none;">
            <p style="font-size:40px;">ğŸ’ ğŸ’ ğŸ¤ ğŸ‘±ğŸ»â€â™€ï¸</p>
            <input type="text" id="i2" placeholder="Nombre...">
            <button class="btn" onclick="chkA(2, 'ariana')">Siguiente â¡ï¸</button>
        </div>
        <div id="art3" style="display:none;">
            <p style="font-size:40px;">ğŸ¸ ğŸ•¶ï¸ ğŸŒ® ğŸ‡²ğŸ‡½</p>
            <p>"Lo Que Siento..."</p>
            <input type="text" id="i3" placeholder="Nombre...">
            <button class="btn" onclick="chkA(3, 'cuco')">Siguiente â¡ï¸</button>
        </div>
        <div id="art4" style="display:none;">
            <p style="font-size:40px;">ğŸ‡¨ğŸ‡º ğŸ¸ ğŸ¶ ğŸ‘´ğŸ»</p>
            <p>"Te AmarÃ©..."</p>
            <input type="text" id="i4" placeholder="Nombre...">
            <button class="btn" onclick="chkA(4, 'silvio')">Siguiente â¡ï¸</button>
        </div>
        <div id="art5" style="display:none;">
            <p style="font-size:40px;">ğŸ•¶ï¸ ğŸ‡µğŸ‡· ğŸš— ğŸ¶</p>
            <p>"Obsesionado..."</p>
            <input type="text" id="i5" placeholder="Nombre...">
            <button class="btn" onclick="chkA(5, 'farruko')">Terminar Trivia â¡ï¸</button>
        </div>
    </div>
</section>

<section id="p7" class="pantalla">
    <div class="card" style="border-color:#4caf50;">
        <h2 style="color:#2e7d32">Tu JardÃ­n de Tulipanes ğŸŒ·</h2>
        <p style="font-style:italic; color:#4caf50;">"Un jardÃ­n eterno para la persona que hace florecer mi corazÃ³n cada dÃ­a."</p>
        <canvas id="cTul" width="320" height="350" style="background:#f0fff0; border:2px solid #4caf50;"></canvas>
        <button class="btn" style="background:#4caf50" onclick="mostrar('p8')">Ver Sorpresa Final ğŸ‰</button>
    </div>
</section>

<section id="p8" class="pantalla dark">
    <div class="card" style="background:rgba(255,255,255,0.05); border:none;">
        <h2 style="color:var(--rosa)">Â¡Para Ti, Mi Vida! ğŸ‰</h2>
        <canvas id="cFue" width="320" height="200" style="background:transparent; border:none;"></canvas>
        <div class="playlist">
            <p>Nuestras canciones:</p>
            <ul>
                <li>The Boy Is Mine - Ariana Grande</li>
                <li>Lo Que Siento - Cuco</li>
                <li>Te AmarÃ© - Silvio RodrÃ­guez</li>
                <li>Obsesionado - Farruko</li>
                <li>Die With A Smile - Lady Gaga & Bruno Mars</li>
            </ul>
        </div>
        <button class="btn" style="width:100%" onclick="mostrar('p9')">LEER MI CARTA ğŸ’Œ</button>
    </div>
</section>

<section id="p9" class="pantalla">
    <div class="card" style="text-align:left; background:#fffaf0;">
        <h2 style="text-align:center; color:var(--magenta)">Mi Amor â¤ï¸</h2>
        <p>QuizÃ¡ te demuestro muy poco y quizÃ¡ esto no sea nada, pero para mÃ­ lo es todo.</p>
        <p>Me haces feliz de una forma que no puedo explicar. Gracias por aguantarme, por estar ahÃ­ y por ser tÃº.</p>
        <p>Eres mi persona favorita en todo el universo.</p>
        <p style="text-align:right; font-weight:bold; color:var(--magenta); margin-top:20px;">Te quiero muchÃ­simo. ğŸŒ¸</p>
        <button class="btn" style="width:100%" onclick="location.reload()">Reiniciar</button>
    </div>
</section>

<script>
    function mostrar(id){
        document.querySelectorAll('.pantalla').forEach(p => p.style.display='none');
        document.getElementById(id).style.display='block';
        if(id === 'p3') initLab();
        if(id === 'p5') initCielo();
        if(id === 'p7') drawTul();
        if(id === 'p8') initFue();
    }

    function sigSub(id){
        const el = document.getElementById(id);
        el.parentElement.querySelectorAll('div').forEach(d => d.style.display='none');
        el.style.display='block';
    }

    function getP(e, c) {
        const r = c.getBoundingClientRect();
        const t = e.touches ? e.touches[0] : e;
        return { x: (t.clientX - r.left) * (c.width / r.width), y: (t.clientY - r.top) * (c.height / r.height) };
    }

    // --- DIBUJO Y RELLENO ---
    const cx1 = document.getElementById("c1").getContext("2d");
    let d=false;
    document.getElementById("c1").addEventListener("touchstart", (e)=>{ e.preventDefault(); d=true; cx1.beginPath(); const p=getP(e,cx1); cx1.moveTo(p.x,p.y); });
    document.getElementById("c1").addEventListener("touchmove", (e)=>{ if(!d) return; const p=getP(e,cx1); cx1.lineTo(p.x,p.y); cx1.strokeStyle="#ff85a2"; cx1.lineWidth=4; cx1.stroke(); });
    
    const cx2 = document.getElementById("c2").getContext("2d");
    cx2.fillStyle="#eee"; cx2.font="300px Arial"; cx2.textAlign="center"; cx2.textBaseline="middle"; cx2.fillText("â¤", 160, 180);
    document.getElementById("c2").addEventListener("touchmove", (e)=>{ e.preventDefault(); const p=getP(e,cx2); cx2.globalCompositeOperation="source-atop"; cx2.fillStyle="#ff4d6d"; cx2.beginPath(); cx2.arc(p.x,p.y,30,0,Math.PI*2); cx2.fill(); });

    // --- CORAZONES ---
    let pts=0, lC=[];
    function startCorazones(){
        const cx3 = document.getElementById("c3").getContext("2d");
        function loop(){
            cx3.clearRect(0,0,320,350);
            if(Math.random()<0.05) lC.push({x:Math.random()*280+20, y:-20, c:Math.random()>0.3?"#ff85a2":"#4da3ff"});
            lC.forEach((c,i)=>{
                c.y+=4; cx3.font="30px Arial"; cx3.fillText(c.c==="#ff85a2"?"ğŸ’—":"ğŸ’™", c.x, c.y);
                if(c.y>380) lC.splice(i,1);
            });
            if(pts<10) requestAnimationFrame(loop); else mostrar('p3');
        }
        document.getElementById("c3").addEventListener("touchstart", (e)=>{
            const p=getP(e,document.getElementById("c3"));
            lC.forEach((c,i)=>{ if(Math.hypot(p.x-c.x, p.y-c.y+15)<40){ if(c.c==="#ff85a2") pts++; else pts=Math.max(0,pts-2); lC.splice(i,1); document.getElementById("pts").innerText=`Puntos: ${pts}/10`; }});
        });
        loop();
    }

    // --- LABERINTO ---
    function initLab(){
        const cl=document.getElementById("cLab"), cxl=cl.getContext("2d");
        let pl={x:25, y:25};
        function draw(){
            cxl.clearRect(0,0,320,350); cxl.fillStyle="#ff85a2";
            cxl.fillRect(0,60,240,20); cxl.fillRect(80,140,240,20); cxl.fillRect(0,220,240,20);
            cxl.font="25px Arial"; cxl.fillText("â¤ï¸", pl.x-12, pl.y+10); cxl.fillText("ğŸŒŸ", 280, 320);
        }
        cl.addEventListener("touchmove",(e)=>{
            e.preventDefault(); const p=getP(e,cl); const d=cxl.getImageData(p.x,p.y,1,1).data;
            if(d[0]===255 && d[1]===133) pl={x:25,y:25}; else pl=p;
            if(pl.x>260 && pl.y>300) mostrar('p4'); draw();
        });
        draw();
    }

    // --- CIELO ---
    function initCielo(){
        const cc=document.getElementById("cCielo"), cxc=cc.getContext("2d");
        let en=0, ps={x:160,y:300}, obs=[];
        cc.addEventListener("touchmove",(e)=>{e.preventDefault(); ps=getP(e,cc);});
        function loop(){
            cxc.clearRect(0,0,320,350); cxc.font="30px Arial"; cxc.fillText("â¤ï¸", ps.x-15, ps.y);
            if(Math.random()<0.1) obs.push({x:Math.random()*300, y:-30});
            obs.forEach((o,i)=>{ o.y+=6; cxc.fillText("â˜ï¸", o.x, o.y); if(Math.hypot(ps.x-o.x, ps.y-o.y)<35){ en=Math.max(0,en-10); obs.splice(i,1); } });
            en+=0.3; document.getElementById("enText").innerText=`EnergÃ­a de Amor: ${Math.floor(en)}%`;
            if(en>=100) mostrar('p6'); if(document.getElementById('p5').style.display==='block') requestAnimationFrame(loop);
        }
        loop();
    }

    // --- TRIVIA ---
    function chkA(n, corr){
        const v = document.getElementById("i"+n).value.toLowerCase();
        if(v.includes(corr)){
            if(n<5) sigSub('art'+(n+1)); else mostrar('p7');
        } else { alert("Â¡IntÃ©ntalo de nuevo, mi amor!"); }
    }

    // --- TULIPANES ---
    function drawTul(){
        const ctx = document.getElementById("cTul").getContext("2d");
        ctx.clearRect(0,0,320,350);
        for(let i=0; i<7; i++){
            let x = 40 + i*40, y = 250 + Math.sin(i)*15;
            ctx.strokeStyle="#4caf50"; ctx.lineWidth=3;
            ctx.beginPath(); ctx.moveTo(x, 350); ctx.quadraticCurveTo(x-10, y+40, x, y); ctx.stroke();
            ctx.fillStyle=i%2===0?"#ff85a2":"#ff4d6d";
            ctx.beginPath(); ctx.ellipse(x, y-15, 12, 20, 0, 0, Math.PI*2); ctx.fill();
            ctx.beginPath(); ctx.ellipse(x-8, y-10, 10, 18, -0.3, 0, Math.PI*2); ctx.fill();
            ctx.beginPath(); ctx.ellipse(x+8, y-10, 10, 18, 0.3, 0, Math.PI*2); ctx.fill();
        }
    }

    // --- FUEGOS ---
    function initFue(){
        const ctx = document.getElementById("cFue").getContext("2d");
        let p = [];
        setInterval(()=>{
            const col = `hsl(${Math.random()*360},100%,70%)`;
            const x = Math.random()*320, y = Math.random()*100;
            for(let i=0;i<40;i++) p.push({x,y,vx:(Math.random()-0.5)*10,vy:(Math.random()-0.5)*10,c:col,a:1});
        }, 1000);
        function loop(){
            ctx.clearRect(0,0,320,200);
            p.forEach((m,i)=>{
                m.x+=m.vx; m.y+=m.vy; m.vy+=0.15; m.a-=0.015;
                ctx.globalAlpha=m.a; ctx.fillStyle=m.c; ctx.fillRect(m.x,m.y,3,3);
                if(m.a<=0) p.splice(i,1);
            });
            requestAnimationFrame(loop);
        }
        loop();
    }
</script>
</body>
</html>
