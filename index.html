<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Con amor para ti ğŸŒ¸</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root {
      --rosa: #FF69B4;
      --rosa-claro: #FFB6C1; 
      --magenta: #DB7093; 
      --bg: #FFF0F5;
      --oscuro: #0b132b; 
      --azul: #00d4ff; 
      --verde: #1DB954; 
      --gris: #1a1a1a; 
      --oro: #FFD700;
    }
    * { box-sizing: border-box; }
    body { margin:0; font-family: Georgia, serif; background: var(--bg); color:#333; overflow-x: hidden; }
    .pantalla { display:none; padding:26px; text-align:center; min-height:100vh; }
    .btn { margin:10px; padding:12px 20px; border:none; border-radius:10px; font-weight:bold; cursor:pointer; transition: transform 0.2s; }
    .btn:active { transform: scale(0.95); }
    .btn-primario { background: var(--rosa); color: white; }
    .btn-rosa { background: var(--rosa-claro); color:white; }
    .btn-verde { background: var(--verde); color:white; }
    .btn-azul { background: var(--azul); color:black; }
    canvas { border:2px solid #ffc0cb; background:transparent; border-radius:8px; max-width: 100%; height: auto; }
    input { padding:10px; font-size:16px; border:2px solid #eee; border-radius:8px; text-align:center; }
    
    #juego3 { background: var(--oscuro); color:white; }
    #juego4 { background:#0d1b2a; color:white; }
    #juego5 { background:#FFF5EE; }
    #juego6 { background:#FFF9FB; }
    #juego7 { background:#121212; color:white; }
    #juego8 { background: var(--gris); color:white; }
    #juego10 { background:#000014; color:white; }
    #cartaFinal { background:#FFFAF0; }
  </style>
</head>
<body>

<section id="bienvenida" class="pantalla" style="display:block;">
  <h1 style="color:var(--magenta)">Para mi persona favorita</h1>
  <p style="color:#BC8F8F">He preparado este pequeÃ±o rincÃ³n para ti.<br>Â¿Me permites mostrarte?</p>
  <button class="btn btn-rosa" onclick="mostrar('juego1')">Comenzar Viaje âœ¨</button>
</section>

<section id="juego1" class="pantalla">
  <h2 style="color:#CD5C5C">ğŸ’– Primer Reto: Afecto</h2>
  <p style="color:#888;">Intenta atrapar el sentimiento... o dale a â€œSiguienteâ€ â¤ï¸</p>

  <div id="ronda1">
    <h3>Ronda 1: Un besito â¤ï¸</h3>
    <canvas id="canvasR1" width="600" height="260"></canvas>
    <br><button class="btn btn-rosa" onclick="pasarRonda(1)">Siguiente â¡ï¸</button>
  </div>

  <div id="ronda2" style="display:none;">
    <h3>Ronda 2: Un abrazo ğŸ’œ</h3>
    <canvas id="canvasR2" width="600" height="260"></canvas>
    <br><button class="btn btn-rosa" onclick="pasarRonda(2)">Siguiente â¡ï¸</button>
  </div>

  <div id="ronda3" style="display:none;">
    <h3>Busca 5 corazones rosados ğŸ’—</h3>
    <canvas id="canvasCorazones" width="600" height="350"></canvas>
    <p id="puntos">Puntos: 0/5</p>
    <button id="btnNext1" class="btn btn-primario" style="display:none;" onclick="mostrar('juego2')">Siguiente â¡ï¸</button>
  </div>
</section>

<section id="juego2" class="pantalla">
  <h2 style="color:var(--magenta)">ğŸ¨ Encuentra el color oculto</h2>
  <p id="intentos">Te quedan 3 intentos</p>
  <div id="opciones"></div>
  <p id="mensaje" style="color:#F08080"></p>
</section>

<section id="juego3" class="pantalla">
  <h2>ğŸš€ Viaje Estelar (El Principito)</h2>
  <p id="frase" style="font-size: 1.2rem; font-style: italic;"></p>
  <div id="opcionesPrincipito"></div>
  <p id="estado" style="margin-top: 20px; font-weight: bold;"></p>
</section>

<section id="juego4" class="pantalla">
  <h2>âœ¨ PROTEGE NUESTRO CIELO âœ¨</h2>
  <p>Esquiva las nubes y rayos con el cursor</p>
  <canvas id="canvasEsquiva" width="600" height="450"></canvas>
  <p id="energia" style="font-size: 1.5rem; font-weight: bold;">EnergÃ­a del Amor: 0%</p>
</section>

<section id="juego5" class="pantalla">
  <h2>ğŸ’– Laberinto MÃ¡gico</h2>
  <p>Lleva el ğŸ’– hasta el cÃ­rculo rosado sin tocar los muros</p>
  <p id="vidas">Vidas: â¤ï¸ â¤ï¸ â¤ï¸</p>
  <canvas id="canvasLaberinto" width="600" height="400"></canvas>
</section>

<section id="juego6" class="pantalla">
  <h2>ğŸŒ¸ JardÃ­n Final ğŸŒ¸</h2>
  <canvas id="canvasJardin" width="800" height="650"></canvas>
  <br>
  <button class="btn btn-primario" onclick="mostrar('juego7')">Continuar â¡ï¸</button>
</section>

<section id="juego7" class="pantalla">
  <h2>ğŸµ Trivia Musical ğŸµ</h2>
  <p id="pregunta" style="font-size: 1.3rem;"></p>
  <div id="opcionesTrivia"></div>
</section>

<section id="juego8" class="pantalla">
  <h2>ğŸ¤ Completa la letra ğŸ¤</h2>
  <p id="tituloLetra" style="font-style:italic; color:#cccccc"></p>
  <p id="fraseLetra" style="font-weight:bold; font-size: 1.2rem; margin: 20px 0;"></p>
  <div id="opcionesLetra"></div>
</section>

<section id="juego9" class="pantalla">
  <h2>ğŸ•µï¸ Adivina el Artista por Emojis</h2>
  <p id="emojiArtista" style="font-size:50px; margin: 20px 0;"></p>
  <input id="entradaArtista" type="text" placeholder="Escribe tu respuesta..." />
  <br>
  <button class="btn btn-verde" onclick="verificarArtista()">Comprobar</button>
  <p id="errorArtista" style="color:red; margin-top: 10px;"></p>
</section>

<section id="juego10" class="pantalla">
  <h2 style="color:var(--oro)">ğŸ‰ Â¡Felicidades por llegar hasta aquÃ­! ğŸ‰</h2>
  <canvas id="canvasFuegos" width="800" height="650" style="background:#000014; border-color:#222;"></canvas>
  <br>
  <button class="btn btn-rosa" onclick="mostrar('cartaFinal')">Abrir Carta Especial ğŸ’Œ</button>
</section>

<section id="cartaFinal" class="pantalla">
  <h2 style="color:var(--magenta); margin-bottom:12px;">Mi Carta Especial...</h2>
  <div style="position:relative; max-width:860px; margin:0 auto;">
    <canvas id="canvasCarta" width="820" height="520" style="background:#FFFAF0; border:none; border-radius:12px;"></canvas>
    <div style="position:absolute; left:50%; top:50%; transform:translate(-50%, -50%); width:620px; max-width:92%; background:#FFEFF4; border:2px solid #FFC0CB; border-radius:12px; box-shadow:0 10px 25px rgba(219,112,147,0.25); color:#505050; text-align:center; padding:22px; z-index: 10;">
      <h3 style="margin:0 0 12px; color:#DB7093; font-family:Georgia, serif;">Para ti...</h3>
      <div style="font-family:Verdana, sans-serif; font-size:14px; line-height:1.6; text-align:justify; color:#505050; max-height:280px; overflow:auto; padding-right: 10px;">
        QuizÃ¡ te demuestro muy poco y quizÃ¡ esto no sea nada o, si lo es, no sea suficiente. No es que no quiera expresar o mostrar todo lo que siento.
        Realmente, hay muchas cosas que siento y que quisiera expresar, pero creo que de verdad me quedo corta, jajaja, irÃ³nico Â¿cierto?
        Haciendo esto cayeron varias de mis lÃ¡grimas, no lo voy a negar. Muchas cosas me asustan y, entre esas, que me destrocen, porque una vez ya lleguÃ© a eso.
        Al menos, si llego a caer ahÃ­ otra vez, que no sea por ti, por favor. Quiero algo bonito e igual siento que quizÃ¡ si no funciona pueda ser porque soy yo el problema.
        Siendo asÃ­, te pido disculpas, quizÃ¡ por el miedo a llorar me limitÃ© a ciertas cosas. Bueno, pero quiero que sepas que hay muchos sentimientos,
        muchas emociones que me haces sentir. Me haces feliz y quiero poder hacerte igual de feliz. Gracias por estar y por aguantarme.
        SÃ© que me pongo tonta y sigo mejorando por ti para ser y poder entregarte lo mejor.
        <br><br><strong>Â¡Muakkkk!</strong>
      </div>
      <button class="btn btn-primario" style="margin-top:14px;" onclick="finalizarCarta()">Finalizar con un abrazo virtual ğŸ¤—</button>
    </div>
  </div>
</section>

<script>
// NAVEGACIÃ“N
function mostrar(id){
  document.querySelectorAll('.pantalla').forEach(p=>p.style.display='none');
  const el = document.getElementById(id);
  if(el) el.style.display='block';
}

// JUEGO 1: CORAZONES
function pasarRonda(n){
  if(n===1){
    document.getElementById("ronda1").style.display="none";
    document.getElementById("ronda2").style.display="block";
  }
  if(n===2){
    document.getElementById("ronda2").style.display="none";
    document.getElementById("ronda3").style.display="block";
    iniciarRonda3(); // Se llama explÃ­citamente para evitar reinicios por Observer
  }
}

const c1 = document.getElementById("canvasR1"), ctx1 = c1.getContext("2d");
const c2 = document.getElementById("canvasR2"), ctx2 = c2.getContext("2d");
let heart1={x:300,y:140,emoji:"â¤ï¸"}, heart2={x:300,y:140,emoji:"ğŸ’œ"};

function drawR1(){ ctx1.clearRect(0,0,c1.width,c1.height); ctx1.font="52px Arial"; ctx1.fillText(heart1.emoji, heart1.x, heart1.y); }
function drawR2(){ ctx2.clearRect(0,0,c2.width,c2.height); ctx2.font="52px Arial"; ctx2.fillText(heart2.emoji, heart2.x, heart2.y); }
function moveRandom1(){ heart1.x=Math.random()*520+40; heart1.y=Math.random()*180+40; drawR1(); }
function moveRandom2(){ heart2.x=Math.random()*520+40; heart2.y=Math.random()*180+40; drawR2(); }

c1.addEventListener("mousemove",(e)=>{
  const rect=c1.getBoundingClientRect();
  const x=e.clientX-rect.left, y=e.clientY-rect.top;
  if(Math.hypot(x-heart1.x,y-heart1.y+20)<45) moveRandom1();
});
c2.addEventListener("mousemove",(e)=>{
  const rect=c2.getBoundingClientRect();
  const x=e.clientX-rect.left, y=e.clientY-rect.top;
  if(Math.hypot(x-heart2.x,y-heart2.y+20)<45) moveRandom2();
});
drawR1(); drawR2();

// Ronda 3 lÃ³gica
const c3 = document.getElementById("canvasCorazones"), ctx3 = c3.getContext("2d");
let puntosJ1=0, arrJ1=[], spawnTimeoutJ1=null, juegoIniciado = false;

function drawR3(){ ctx3.clearRect(0,0,c3.width,c3.height); ctx3.font="36px Arial"; arrJ1.forEach(c=>ctx3.fillText(c.t,c.x,c.y)); }

function spawnR3(){
  if(puntosJ1>=5) return;
  const x=Math.random()*560+20, y=Math.random()*320+20;
  const tipos=["â¤ï¸","ğŸ’œ","ğŸ’—","ğŸŒ¸","âœ¨"];
  const t=tipos[(Math.random()*tipos.length)|0];
  arrJ1.push({x,y,t}); drawR3();
  spawnTimeoutJ1 = setTimeout(spawnR3, 400);
}

function iniciarRonda3(){
  if(juegoIniciado) return; // Esto evita que se reinicie si ya estÃ¡ corriendo
  juegoIniciado = true;
  puntosJ1=0; arrJ1=[]; 
  document.getElementById("puntos").innerText="Puntos: 0/5";
  spawnR3();
}

c3.addEventListener("click",(e)=>{
  const rect=c3.getBoundingClientRect(); const x=e.clientX-rect.left, y=e.clientY-rect.top;
  let closest=-1, best=9999;
  arrJ1.forEach((c,i)=>{const d=Math.hypot(x-c.x,y-c.y+20); if(d<best){best=d; closest=i;}});
  if(closest!==-1 && best<40){
    if(arrJ1[closest].t==="ğŸ’—"){
      puntosJ1++; document.getElementById("puntos").innerText=`Puntos: ${puntosJ1}/5`;
      arrJ1.splice(closest,1); drawR3();
      if(puntosJ1>=5){ 
        document.getElementById("btnNext1").style.display="inline-block"; 
        clearTimeout(spawnTimeoutJ1); 
      }
    } else { arrJ1.splice(closest,1); drawR3(); }
  }
});

// JUEGO 2: COLORES
(function(){
  const intentosLbl = document.getElementById("intentos");
  const opcionesDiv = document.getElementById("opciones");
  const msg = document.getElementById("mensaje");
  let intentos = 3;
  const trollMsgs = ["Â¿Azul como el mar? No creo... ğŸŒŠ", "El rojo es lindo, pero Â¿es ese? â¤ï¸", "Verde esperanza... ğŸŒ¿"];
  const opciones = [{n:"Azul", c:"#ADD8E6"}, {n:"Rojo", c:"#FFB2B2"}, {n:"Verde", c:"#C2F0C2"}, {n:"Amarillo", c:"#FFFFE0"}];
  
  opcionesDiv.innerHTML = opciones.map(o => `<button class="btn" style="background:${o.c}; width:120px;" onclick="verificarColor('${o.n}')">${o.n}</button>`).join("");
  window.verificarColor = (elegido) => {
    intentos--;
    if(intentos>0){
      msg.innerText = trollMsgs[(Math.random()*trollMsgs.length)|0];
      intentosLbl.innerText = `Te quedan ${intentos} intentos`;
    } else {
      opcionesDiv.innerHTML = "";
      intentosLbl.innerText = "Â¡Se acabaron los intentos! ğŸ¤­";
      const btn = document.createElement("button");
      btn.className="btn btn-rosa";
      btn.textContent = "Tap tap aquÃ­, te equivocaste, era el color de fondo ğŸ¤¡";
      btn.onclick = () => {
        document.getElementById("juego2").innerHTML = `
          <h2 style="color:white; background:#FFC0CB; padding:50px; border-radius:12px;">Â¡Era obvio! El color era ROSADO ğŸ’—</h2>
          <button class="btn btn-primario" onclick="mostrar('juego3')">Continuar âœ¨</button>
        `;
      };
      opcionesDiv.appendChild(btn);
    }
  };
})();

// JUEGO 3: PRINCIPITO
(function(){
  const frases = [
    {texto:"Lo esencial es invisible...", correcta:"a los ojos", opciones:["al corazÃ³n","a la mente","al alma"]},
    {texto:"Fue el tiempo que pasaste con tu...", correcta:"rosa", opciones:["planeta","zorro","orgullo"]},
    {texto:"Si vienes, por ejemplo, a las cuatro de la tarde, desde las tres empezarÃ© a ser...", correcta:"feliz", opciones:["puntual","inquieto","amigo"]},
    {texto:"Todas las personas mayores fueron al principio...", correcta:"niÃ±os", opciones:["sabios","pequeÃ±os","soÃ±adores"]}
  ];
  let idx = 0;
  function render(){
    if(idx>=frases.length){
      document.getElementById("juego3").innerHTML = `<h2 style="color:#ffca3a;">âœ¨ Â¡Sabias palabras! âœ¨</h2><button class="btn btn-azul" onclick="mostrar('juego4')">Continuar el viaje ğŸš€</button>`;
      return;
    }
    const f = frases[idx];
    document.getElementById("frase").innerText = `"${f.texto}"`;
    const all = [...f.opciones, f.correcta].sort(()=>Math.random()-0.5);
    document.getElementById("opcionesPrincipito").innerHTML = all.map(o => `<button class="btn" style="background:#1c2541; color:white;" onclick="verificarPrincipito('${o}')">${o}</button>`).join(" ");
  }
  window.verificarPrincipito = (o)=>{
    if(o===frases[idx].correcta){ idx++; render(); }
    else { document.getElementById("estado").innerText="âŒ Intenta de nuevo"; }
  };
  const obs = new MutationObserver(()=>{ if(document.getElementById("juego3").style.display==="block") render(); });
  obs.observe(document.body,{attributes:true, subtree:true, attributeFilter:["style"]});
})();

// JUEGO 4: ESQUIVA
(function(){
  const canvas = document.getElementById("canvasEsquiva");
  const ctx = canvas.getContext("2d");
  const energiaLbl = document.getElementById("energia");
  const corazon = {x:300,y:350};
  let obstaculos = [], rayos = [], puntos = 0, jugando = false;

  canvas.addEventListener("mousemove", (e)=>{
    const r = canvas.getBoundingClientRect();
    corazon.x = e.clientX - r.left; corazon.y = e.clientY - r.top;
  });
  function spawnObstaculos(){
    if(!jugando) return;
    const x = Math.random()*580+20;
    obstaculos.push({x:x, y:-50, tipo:"â˜ï¸", vy:4+Math.random()*4, vx:(Math.random()*4-2)});
    if(Math.random()<0.3){ const y = Math.random()*300+50; rayos.push({x:-50,y}); }
    setTimeout(spawnObstaculos, 300);
  }
  function frame(){
    if(!jugando) return;
    ctx.clearRect(0,0,600,450);
    ctx.font="35px Arial"; ctx.fillText("â¤ï¸",corazon.x-15,corazon.y+15);
    obstaculos.forEach(o=>{
      ctx.fillText(o.tipo, o.x, o.y); o.y+=o.vy;
      if(Math.hypot(corazon.x-o.x, corazon.y-o.y)<40) puntos=Math.max(0, puntos-5);
    });
    rayos.forEach(r=>{
      ctx.fillText("âš¡",r.x,r.y); r.x+=12;
      if(Math.hypot(corazon.x-r.x, corazon.y-r.y)<35) puntos=Math.max(0, puntos-10);
    });
    puntos += 0.3;
    energiaLbl.innerText = `EnergÃ­a del Amor: ${Math.floor(Math.min(100, puntos))}%`;
    if(puntos>=100){
      jugando=false;
      document.getElementById("juego4").innerHTML = `<h2>Â¡CIELO DESPEJADO! âœ¨</h2><button class="btn btn-azul" onclick="mostrar('juego5')">SIGUIENTE â”</button>`;
    } else { requestAnimationFrame(frame); }
  }
  const obs = new MutationObserver(()=>{ if(document.getElementById("juego4").style.display==="block"){ jugando=true; spawnObstaculos(); frame(); } });
  obs.observe(document.body,{attributes:true, subtree:true, attributeFilter:["style"]});
})();

// JUEGO 5: LABERINTO
(function(){
  const canvas = document.getElementById("canvasLaberinto");
  const ctx = canvas.getContext("2d");
  let jugador={x:30,y:40}, vidas=3, jugando=false;
  const meta={x:530,y:340,w:50,h:50};
  canvas.addEventListener("mousemove",(e)=>{const r=canvas.getBoundingClientRect(); jugador.x=e.clientX-r.left; jugador.y=e.clientY-r.top;});
  function loop(){
    if(!jugando) return;
    ctx.clearRect(0,0,600,400);
    ctx.fillStyle="#FF1493"; ctx.beginPath(); ctx.arc(meta.x+25,meta.y+25,25,0,Math.PI*2); ctx.fill();
    ctx.font="22px Arial"; ctx.fillText("ğŸ’–",jugador.x-10,jugador.y+10);
    if(jugador.x>meta.x && jugador.x<meta.x+meta.w && jugador.y>meta.y && jugador.y<meta.y+meta.h){
      jugando=false;
      document.getElementById("juego5").innerHTML = `<h2>Â¡ERES INCREÃBLE! â¤ï¸</h2><button class="btn btn-primario" onclick="mostrar('juego6')">VER REGALO ğŸ</button>`;
    } else { requestAnimationFrame(loop); }
  }
  const obs = new MutationObserver(()=>{ if(document.getElementById("juego5").style.display==="block"){ jugando=true; loop(); } });
  obs.observe(document.body,{attributes:true, subtree:true, attributeFilter:["style"]});
})();

// JUEGO 6: JARDÃN
(function(){
  const canvas = document.getElementById("canvasJardin");
  const ctx = canvas.getContext("2d");
  function loop(){
    ctx.clearRect(0,0,800,650);
    ctx.fillStyle="#DB7093"; ctx.font="30px Georgia"; ctx.fillText("Para mi lugar seguro...",250,90);
    requestAnimationFrame(loop);
  }
  const obs = new MutationObserver(()=>{ if(document.getElementById("juego6").style.display==="block") loop(); });
  obs.observe(document.body,{attributes:true, subtree:true, attributeFilter:["style"]});
})();

// JUEGOS MUSICALES (Trivia, Letra, Artista)
(function(){
  // Trivia
  const trivias = [{p:"Â¿QuiÃ©n es el Rey del Pop?", c:"Michael Jackson", o:["Michael Jackson","Prince","Elvis"]}];
  window.verificarTrivia = (o)=>{ if(o===trivias[0].c) mostrar('juego8'); };
  const obs7 = new MutationObserver(()=>{ if(document.getElementById("juego7").style.display==="block"){
    const q = trivias[0];
    document.getElementById("pregunta").innerText = q.p;
    document.getElementById("opcionesTrivia").innerHTML = q.o.map(opt => `<button class="btn" style="background:#282828; color:white;" onclick="verificarTrivia('${opt}')">${opt}</button>`).join(" ");
  }});
  obs7.observe(document.body,{attributes:true, subtree:true, attributeFilter:["style"]});

  // Letra
  window.verificarLetra = (o)=>{ if(o.includes("respondido")) mostrar('juego9'); };
  const obs8 = new MutationObserver(()=>{ if(document.getElementById("juego8").style.display==="block"){
    document.getElementById("fraseLetra").innerText = "Si tÃº me hubieras dicho siempre la verdad...";
    document.getElementById("opcionesLetra").innerHTML = `<button class="btn" onclick="verificarLetra('si hubieras respondido')">si hubieras respondido cuando te llamÃ©</button>`;
  }});
  obs8.observe(document.body,{attributes:true, subtree:true, attributeFilter:["style"]});

  // Artista
  window.verificarArtista = ()=>{ if(document.getElementById("entradaArtista").value.toLowerCase().includes("luis miguel")) mostrar('juego10'); };
  const obs9 = new MutationObserver(()=>{ if(document.getElementById("juego9").style.display==="block"){
    document.getElementById("emojiArtista").innerText = "â˜€ï¸ ğŸ‡²ğŸ‡½ ğŸ™ï¸";
  }});
  obs9.observe(document.body,{attributes:true, subtree:true, attributeFilter:["style"]});
})();

// JUEGO 10: FUEGOS
(function(){
  const canvas = document.getElementById("canvasFuegos");
  const ctx = canvas.getContext("2d");
  function loop(){
    ctx.fillStyle="rgba(0,0,20,0.2)"; ctx.fillRect(0,0,canvas.width,canvas.height);
    requestAnimationFrame(loop);
  }
  const obs = new MutationObserver(()=>{ if(document.getElementById("juego10").style.display==="block") loop(); });
  obs.observe(document.body,{attributes:true, subtree:true, attributeFilter:["style"]});
})();

// CARTA FINAL
(function(){
  const canvas = document.getElementById("canvasCarta");
  const ctx = canvas.getContext("2d");
  function loop(){
    ctx.clearRect(0,0,canvas.width,canvas.height);
    ctx.font="20px Arial"; ctx.fillText("ğŸ’—", Math.random()*800, Math.random()*500);
    requestAnimationFrame(loop);
  }
  window.finalizarCarta = ()=>{ location.reload(); };
  const obs = new MutationObserver(()=>{ if(document.getElementById("cartaFinal").style.display==="block") loop(); });
  obs.observe(document.body,{attributes:true, subtree:true, attributeFilter:["style"]});
})();
</script>
</body>
</html>





